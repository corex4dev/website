---
import WebsiteLayout from "@/layouts/WebsiteLayout.astro";
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import { render } from "astro:content";

export const getStaticPaths = (async () => {
  const legal = await getCollection("legal");
  return legal.map((l) => ({
    params: { slug: l.id },
    props: { page: l },
  }));
}) satisfies GetStaticPaths;

const { page } = Astro.props;

const {
  data: { title, "short-description": description, subtitle, lastUpdated },
} = page;

const { Content } = await render(page);
---

<WebsiteLayout seoProps={{ title, description }}>
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-24">
    <div class="mb-24 text-center">
      <h1 class="text-4xl md:text-6xl font-black tracking-tight mb-6">
        {title}
      </h1>
      <div
        class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-indigo-900 rounded-full border border-slate-200 dark:border-indigo-800 shadow-sm"
      >
        <span
          class="w-2 h-2 bg-indigo-500 dark:bg-indigo-300 rounded-full animate-pulse"
        ></span>
        <p
          class="text-slate-500 dark:text-slate-300 text-xs font-medium uppercase tracking-wider"
        >
          Última actualización: {
            Intl.DateTimeFormat("es-MX", { dateStyle: "long" }).format(
              lastUpdated,
            )
          }
        </p>
      </div>
    </div>

    <div
      class="card rounded-[2.5rem] shadow-xl shadow-slate-200/50 dark:shadow-slate-700/50 border p-8 md:p-16 relative overflow-hidden"
    >
      {/* Decorative background element */}
      <div
        class="absolute top-0 right-0 w-64 h-64 bg-indigo-100/50 dark:bg-indigo-950/50 blur-3xl rounded-full -mr-32 -mt-32 pointer-events-none"
      >
      </div>

      <div
        class="prose prose-slate dark:prose-invert prose-indigo max-w-none relative z-10prose-headings:font-black prose-a:text-indigo-600 dark:prose-a:text-indigo-400 prose-hr:my-12 prose-hr:mx-auto prose-hr:w-3/4 prose-img:rounded-3xl leading-relaxed text-slate-700 dark:text-slate-400"
      >
        <Content />
      </div>
    </div>
    <div class="mt-12 text-center">
      <p class="text-slate-400 dark:text-slate-500 text-sm">
        ¿Tienes dudas? Contáctanos en <a
          href="mailto:corex4dev@gmail.com"
          class="text-indigo-600 dark:text-indigo-500 font-semibold hover:underline"
          >corex4dev@gmail.com</a
        >
      </p>
    </div>
  </div>
</WebsiteLayout>
