---
if (!import.meta.env.PROD) return null;
---

<!-- Google Tag Manager -->
<script is:inline>
  (function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != "dataLayer" ? "&l=" + l : "";
    j.async = true;
    j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, "script", "dataLayer", "GTM-N88Z66CX");
</script>

<!-- <script
  is:inline
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-VB19GN2CX7"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  window.gtag = function (...args) {
    window.dataLayer.push(args);
  };

  window.gtag("js", new Date());

  // Consent mode (antes de config)
  window.gtag("consent", "default", {
    ad_storage: "denied",
    ad_user_data: "denied",
    ad_personalization: "denied",
    analytics_storage: "denied",
  });

  // IMPORTANTE:
  // desactivar page_view autom√°tico
  window.gtag("config", "G-VB19GN2CX7", {
    send_page_view: false,
  });
</script>
 -->
<script is:inline>
  const reportPageView = () => {
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: "pageview",
      page_path: window.location.pathname,
      page_title: document.title,
      page_location: window.location.href,
    });
  };

  document.addEventListener("astro:page-load", reportPageView);
</script>
