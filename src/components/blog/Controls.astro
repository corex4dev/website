---
import { Funnel, Search } from "@lucide/astro";
import { getCollection } from "astro:content";

interface Props {
  selectedCategory?: string;
}

const { selectedCategory } = Astro.props;
const categories = await getCollection("category");
---

{/* Controls */}
<div class="flex flex-col lg:flex-row gap-8 mb-12">
  <div class="relative flex-1">
    <Search
      class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"
      size={20}
    />
    <input
      id="searchInput"
      type="search"
      placeholder="Buscar tutoriales..."
      class="w-full pl-12 pr-4 py-4 rounded-2xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white shadow-sm"
    />
  </div>
  <div class="flex items-center gap-4 overflow-x-auto pb-2 scrollbar-hide">
    <Funnel class="text-slate-400 hidden sm:block" size={20} />
    <a
      href={`/blog`}
      class={`px-6 py-3 rounded-xl whitespace-nowrap font-medium transition-all ${
        !selectedCategory
          ? "bg-indigo-600 text-white shadow-lg shadow-indigo-100"
          : "bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"
      }`}
    >
      Todos
    </a>
    {
      categories.map((cat) => (
        <a
          href={`/blog/categoria/${cat.id}`}
          class={`px-6 py-3 rounded-xl whitespace-nowrap font-medium transition-all ${
            selectedCategory === cat.id
              ? "bg-indigo-600 text-white shadow-lg shadow-indigo-100"
              : "bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"
          }`}
        >
          {cat.data.title}
        </a>
      ))
    }
  </div>
</div>
